   
  <canvas id="canvas">
    Your browser doesn't support canvas
  </canvas>

  </body>

  <script>
    (function(){
      var canvas  = document.getElementById('canvas'),
          c       = '',
          w       = '',
          h       = '',
          iteration = 0 ,
          mouse   = {x:0, y:0, down: false, up: false},
          helper  = {
    
            r: function(min, max) { 
              return min + Math.floor( Math.random() * max ); 
            },
    
          };
    
    
      function init() {
    
        /** supports canvas ? */
        if( canvas && canvas.getContext ) {
    
          c = canvas.getContext('2d');
    
          addEventListener('resize'    , resize    , false);
          addEventListener('mousemove' , MouseMove , false);
          addEventListener('mousedown' , MouseDown , false);
          addEventListener('mouseup'   , MouseUp   , false);
    
          resize();
    
          /** Create the balls */
          Ball.init();
    
          setInterval(loop, 30 );
    
        }
    
      };
    
      function resize() {
        canvas.width  = w = innerWidth;
        canvas.height = h = innerHeight;
      };
    
      function MouseDown() {
        mouse.down = true;
        mouse.up   = false;
      };
    
      function MouseUp() {
        mouse.down = false;
        mouse.up   = true;
      };
    
      function MouseMove(e) {
    
        mouse.x = e.pageX;
        mouse.y = e.pageY;
    
      };
    
      function loop() {
    
        iteration += 1 ;
    
        c.clearRect(0,0,w,h);
    
        for( i=0; i < Ball.opts.limit; i++ ) {
    
          var ball = Ball.balls[i] ;
    
          ball.angle.current += ball.angle.increment;
    
          /** draw balls closer */
          if( mouse.down ) {
    
            if( ball.orbit.current > 1.5 && Math.random() < .7 ) {
    
              ball.orbit.current *= .5 ;
    
            } else {
              
              ball.orbit.current *= 1.5 ;
    
            }
    
            if(Math.random() > .999) {
              ball.position.x = helper.r(0, w);
              ball.position.y = helper.r(0, h);
              ball.orbit.current *= 1.5 ;
            }
    
            ball.angle.increment = -ball.angle.increment ;
    
            ball.position.x += ( mouse.x - ball.position.x ) / 10 ;
            ball.position.y += ( mouse.y - ball.position.y ) / 10 ;
    
          }
    
          /** scatter the balls */
          if( mouse.up ) {
    
            ball.orbit.current = ball.orbit.original ;
    
            /** reposition balls */
            if(iteration % 300 == 0 ) {
    
              ball.origin.x = helper.r(0, w);
              ball.origin.y = helper.r(0, h);
    
            }
    
            /** send the balls to their home */
            ball.position.x += ( ball.origin.x - ball.position.x ) / 20 ;
            ball.position.y += ( ball.origin.y - ball.position.y ) / 20 ;
    
          }
    
          ball.position.x = ball.position.x + Math.sin( ball.angle.current ) * ball.orbit.current ;
          ball.position.y = ball.position.y + Math.cos( ball.angle.current ) * ball.orbit.current ;
    
    
          /** Draw */
          c.beginPath();
          c.fillStyle = ball.color;
          c.arc(ball.position.x, ball.position.y, ball.radius, 0, Math.PI * 2, true);
          c.fill();
          c.closePath();
    
        }
    
      };
    
      Ball = {
    
        opts: {
          limit: 500
        },
    
        balls: [],
    
        init: function() {
    
          Ball.create();
    
        },
    
        create: function() {
    
          for( i=0; i < Ball.opts.limit; i++ ) {
    
            ball = {
              radius    : 3 + Math.random() * 11 ,
              color     : ['rgb( ', helper.r(0,200) , ',' , helper.r(0, 250) , ',', helper.r(0, 250), ')'].join(''),
              speed     : 1 ,
              angle     : { current : helper.r(0, 360), increment : .01 } ,
              orbit     : { current : helper.r(10, 40), original : helper.r(10, 40) } ,
              position  : {x : helper.r(0, w), y : helper.r(0, h)},
              origin    : {x : helper.r(0, w), y : helper.r(0, h)},
              direction : {x : 0, y : 0}
            };
    
            Ball.balls.push(ball);
    
          }
          
        },
    
      };
    
    
      init();
    
      
    })()

  </script>
